'use strict mode';

(($) => {
  // CAROUSEL
  // TODO: –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –∫–∞—Ä—É—Å–µ–ª—å
  // https://www.w3schools.com/howto/howto_js_slideshow.asp
  // https://www.sitepoint.com/simple-javascript-quiz/#addingpagination
  const carousel = $('.carousel');

  carousel.carousel({
    interval: 0,
  });

  document.querySelectorAll('.quiz__answer:not(.is-last)').forEach((el) => {
    el.addEventListener('click', () => {
      setTimeout(() => {
        // TODO: –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –∫–∞—Ä—É—Å–µ–ª—å –∏ –µ—ë —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
        carousel.carousel('next');
      }, 320);
    });
  });

  // TODO: –º–µ–Ω—è—Ç—å –∫–ª–∞—Å—Å—ã body –Ω–∞ —Å–º–µ–Ω–µ –∫–∞–¥—Ä–æ–≤
  // –º–±, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å src/util/enter-leave-transitions.js
  // Change body classes
  carousel.on('slide.bs.carousel', (e) => {
    // Remove body slide-* classes
    $('body').removeClass();

    // Add new body class based on slide id
    const bodyClass = `page is-home has-open-${e.relatedTarget.id}`;
    $('body').addClass(bodyClass);
  });

  /**
   * 2) –ü–æ–¥–≤–µ–¥–µ–Ω–∏–µ –∏—Ç–æ–≥–æ–≤
   * @return {string} –†–µ–∑—É–ª—å—Ç–∞—Ç
   */
  function summingUp() {
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –≥—Ä—É–ø–ø —Ä–∞–¥–∏–æ–∫–Ω–æ–ø–æ–∫
    const age       = $('input[name="age"]:checked').val();
    const residence = $('input[name="residence"]:checked').val();
    const family    = $('input[name="family"]:checked').val();
    const ha        = $('input[name="ha"]:checked').val();
    let resume;
    let resumeTitle;

    // –°–≤–µ—Ä—è–µ–º –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã —Å —É—Å–ª–æ–≤–∏—è–º–∏ –≤—ã–¥–∞—á–∏ –∏–ø–æ—Ç–µ–∫–∏
    if (age === 'lth 36') {
      if (residence === 'FE') {
        // –ú–æ–ª–æ–¥—ã–µ —Å–µ–º—å–∏ (–î–í)
        if (family === 'family' || family === 'has child') {
          resumeTitle = '–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!';
          resume = `
            <p>–í—ã&nbsp;‚Äî –∏–¥–µ–∞–ª—å–Ω—ã–π –∫–∞–Ω–¥–∏–¥–∞—Ç –¥–ª—è —É—á–∞—Å—Ç–∏—è –≤&nbsp;–∏–ø–æ—Ç–µ—á–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ ¬´–î–∞–ª—å–Ω–µ–≤–æ—Å—Ç–æ—á–Ω–∞—è –∏–ø–æ—Ç–µ–∫–∞¬ª, –∫–æ—Ç–æ—Ä—É—é –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–ª –ü—Ä–µ–∑–∏–¥–µ–Ω—Ç –†–§. –ï—Å–ª–∏ –í–∞—à–∞ –∫—Ä–µ–¥–∏—Ç–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –≤&nbsp;–ø–æ—Ä—è–¥–∫–µ, —Ç–æ&nbsp;–≤—ã&nbsp;—Å–º–æ–∂–µ—Ç–µ –æ—Ñ–æ—Ä–º–∏—Ç—å –ª—å–≥–æ—Ç–Ω—ã–π –∫—Ä–µ–¥–∏—Ç –ø–æ&nbsp;—Å–∞–º–æ–π –Ω–∏–∑–∫–æ–π —Å—Ç–∞–≤–∫–µ –≤&nbsp;–†–æ—Å—Å–∏–∏ 2&nbsp;%!</p>
            <p class="note">–ü–æ–º–Ω–∏—Ç–µ –æ&nbsp;—Ç–æ–º, —á—Ç–æ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –æ&nbsp;–≤—ã–¥–∞—á–µ –ª—å–≥–æ—Ç–Ω–æ–π –∏–ø–æ—Ç–µ–∫–∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –±–∞–Ω–∫. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤&nbsp;–æ–¥–∏–Ω –∏–∑&nbsp;–±–∞–Ω–∫–æ–≤-—É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º—ã. <a class="link is-forward" href="https://www.hcfe.ru/support-measures/dv-ipoteka/" target="_blank" rel="noopener noreferrer">–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏</a></p>
          `;
        } else {
          // –•–æ–ª–æ—Å—Ç—è–∫–∏ (–î–í)
          resumeTitle = '–•–º. –ë—ã—Ç—å –º–æ–∂–µ—Ç –ø–æ—Ä–∞ –ø–æ–¥—É–º–∞—Ç—å –æ&nbsp;—Å–≤–∞–¥—å–±–µ?';
          resume = `
            <p>–¢–µ–º –±–æ–ª–µ–µ, —á—Ç–æ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –º–æ–ª–æ–¥–æ–π —Å–µ–º—å–∏ –≤&nbsp;–†–æ—Å—Å–∏–∏ –≤–≤–æ–¥—è—Ç—Å—è –≤—Å—ë –Ω–æ–≤—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã.</p>
            <p class="note">–î–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è —É—Å–ª–æ–≤–∏–π –ø–æ–ª—É—á–µ–Ω–∏—è ¬´–î–∞–ª—å–Ω–µ–≤–æ—Å—Ç–æ—á–Ω–æ–π –∏–ø–æ—Ç–µ–∫–∏¬ª –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±—Ä–∞—Ç–∏—Ç—Å—è –≤&nbsp;–æ–¥–∏–Ω –∏–∑&nbsp;–±–∞–Ω–∫–æ–≤-—É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º—ã. <a class="link is-forward" href="https://www.hcfe.ru/support-measures/dv-ipoteka/" target="_blank" rel="noopener noreferrer">–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏</a></p>
          `;
        }
      } else {
        // –ú–æ–ª–æ–¥—ã–µ —Å–µ–º—å–∏ –∏–∑ –¥—Ä—É–≥–∏—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤
        resumeTitle = '–°–Ω–∞—á–∞–ª–∞ –Ω–∞–¥–æ –ø–µ—Ä–µ–µ—Ö–∞—Ç—å';
        resume = `
          <p>–ü—Ä–æ–≥—Ä–∞–º–º—ã –∏–ø–æ—Ç–µ—á–Ω–æ–≥–æ –∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–∏—è –¥–ª—è –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–∏—è –∫–≤–∞—Ä—Ç–∏—Ä—ã –∏–ª–∏ –ø–æ—Å—Ç—Ä–æ–π–∫–∏ –¥–æ–º–∞ –ø–æ&nbsp;—Å–∞–º–æ–π –Ω–∏–∑–∫–æ–π —Å—Ç–∞–≤–∫–æ–π –≤&nbsp;–†–æ—Å—Å–∏–∏ –≤&nbsp;–Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –¥–µ–π—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ –Ω–∞&nbsp;–î–∞–ª—å–Ω–µ–º –í–æ—Å—Ç–æ–∫–µ –†–æ—Å—Å–∏–∏. –ü–æ—ç—Ç–æ–º—É –µ—Å–ª–∏ –≤—ã&nbsp;–º–æ–ª–æ–¥—ã –∏&nbsp;–æ—Ç–∫—Ä—ã—Ç—ã –≤—Å–µ–º—É –Ω–æ–≤–æ–º—É, –ø–µ—Ä–µ–µ–∑–∂–∞–π—Ç–µ –≤&nbsp;–î–í–§–û :)</p>
          <p class="note">–î–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è —É—Å–ª–æ–≤–∏–π –ø–æ–ª—É—á–µ–Ω–∏—è ¬´–î–∞–ª—å–Ω–µ–≤–æ—Å—Ç–æ—á–Ω–æ–π –∏–ø–æ—Ç–µ–∫–∏¬ª –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±—Ä–∞—Ç–∏—Ç—Å—è –≤&nbsp;–æ–¥–∏–Ω –∏–∑&nbsp;–±–∞–Ω–∫–æ–≤-—É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º—ã. <a class="link is-forward" href="https://www.hcfe.ru/support-measures/dv-ipoteka/" target="_blank" rel="noopener noreferrer">–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏</a></p>
        `;
      }
    } else if (ha === 'ha') {
      // –ù–µ–º–æ–ª–æ–¥—ã–µ ¬´–≥–µ–∫—Ç–∞—Ä—â–∏–∫–∏¬ª
      resumeTitle = '–£ –≤–∞—Å –µ—Å—Ç—å —à–∞–Ω—Å';
      resume = `
        <p>–ï—Å–ª–∏ –≤—ã&nbsp;–ø–æ–ª—É—á–∞—Ç–µ–ª—å –∑–µ–º–ª–∏ –ø–æ&nbsp;–ø—Ä–æ–≥—Ä–∞–º–º–µ ¬´–¥–∞–ª—å–Ω–µ–≤–æ—Å—Ç–æ—á–Ω—ã–π –≥–µ–∫—Ç–∞—Ä¬ª, —Ç–æ&nbsp;–Ω–µ–≤–∞–∂–Ω–æ —Å–∫–æ–ª—å–∫–æ –≤–∞–º –ª–µ—Ç, —Å–∫–æ–ª—å–∫–æ —É&nbsp;–≤–∞—Å –¥–µ—Ç–µ–π –∏&nbsp;–≥–¥–µ –≤—ã&nbsp;–ø—Ä–æ–ø–∏—Å–∞–Ω—ã, –≥–ª–∞–≤–Ω–æ–µ, —á—Ç–æ–±—ã –∑–µ–º–ª—è –±—ã–ª–∞ –ø–æ–ª—É—á–µ–Ω–∞ –ø–æ&nbsp;–ø—Ä–æ–≥—Ä–∞–º–º–µ ¬´–î–∞–ª—å–Ω–µ–≤–æ—Å—Ç–æ—á–Ω—ã–π –≥–µ–∫—Ç–∞—Ä¬ª. –¢–æ&nbsp;–µ—Å—Ç—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–∫–ª—é—á–µ–Ω –¥–æ–≥–æ–≤–æ—Ä –±–µ–∑–≤–æ–∑–º–µ–∑–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–∞&nbsp;–∑–µ–º–µ–ª—å–Ω—ã–π —É—á–∞—Å—Ç–æ–∫.</p>
        <p>–ò–∑&nbsp;–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –ø–æ–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –¥–ª—è –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π ¬´–î–∞–ª—å–Ω–µ–≤–æ—Å—Ç–æ—á–Ω–æ–≥–æ –≥–µ–∫—Ç–∞—Ä–∞¬ª —ç—Ç–æ –≤–∏–¥ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∑–µ–º–ª–∏&nbsp;‚Äî ¬´–î–ª—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ –∂–∏–ª–∏—â–Ω–æ–≥–æ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞¬ª –∏(–∏–ª–∏) ¬´–î–ª—è –≤–µ–¥–µ–Ω–∏—è –ª–∏—á–Ω–æ–≥–æ –ø–æ–¥—Å–æ–±–Ω–æ–≥–æ —Ö–æ–∑—è–π—Å—Ç–≤–∞ (–ø—Ä–∏—É—Å–∞–¥–µ–±–Ω—ã–π —É—á–∞—Å—Ç–æ–∫)¬ª.</p>
        <p class="note">–î–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è —É—Å–ª–æ–≤–∏–π –ø–æ–ª—É—á–µ–Ω–∏—è ¬´–î–∞–ª—å–Ω–µ–≤–æ—Å—Ç–æ—á–Ω–æ–π –∏–ø–æ—Ç–µ–∫–∏¬ª –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±—Ä–∞—Ç–∏—Ç—Å—è –≤&nbsp;–æ–¥–∏–Ω –∏–∑&nbsp;–±–∞–Ω–∫–æ–≤-—É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º—ã. <a class="link is-forward" href="https://www.hcfe.ru/support-measures/dv-ipoteka/" target="_blank" rel="noopener noreferrer">–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏</a></p>
      `;
    } else {
      // –±–µ–∑ —à–∞–Ω—Å–æ–≤
      resumeTitle = '–£–≤—ã üò¢';
      resume = `
        <p>–í—ã&nbsp;—Å—Ç–∞—Ä—à–µ 36&nbsp;–ª–µ—Ç, –ø–æ—ç—Ç–æ–º—É, –≤–∑—è—Ç—å –ª—å–≥–æ—Ç–Ω—ã–π –∏–ø–æ—Ç–µ—á–Ω—ã–π –∫—Ä–µ–¥–∏—Ç –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –∫–≤–∞—Ä—Ç–∏—Ä—ã –Ω–µ&nbsp;—Å–º–æ–∂–µ—Ç–µ. –°–æ–≤–µ—Ç—É–µ–º –ø–æ–¥—É–º–∞—Ç—å –æ–±&nbsp;—É—á–∞—Å—Ç–∏–∏ –≤&nbsp;–ø—Ä–æ–≥—Ä–∞–º–º–µ ¬´–î–∞–ª—å–Ω–µ–≤–æ—Å—Ç–æ—á–Ω—ã–π –≥–µ–∫—Ç–∞—Ä¬ª, —Ç–æ–≥–¥–∞ –≤–∞–º –¥–æ—Å—Ç—É–ø–Ω–∞ –∏–ø–æ—Ç–µ–∫–∞ –ø–æ–¥&nbsp;2% –¥–ª—è –ø–æ—Å—Ç—Ä–æ–π–∫–∏ –¥–æ–º–∞.</p>
        <p class="note">–î–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è —É—Å–ª–æ–≤–∏–π –ø–æ–ª—É—á–µ–Ω–∏—è ¬´–î–∞–ª—å–Ω–µ–≤–æ—Å—Ç–æ—á–Ω–æ–π –∏–ø–æ—Ç–µ–∫–∏¬ª –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±—Ä–∞—Ç–∏—Ç—Å—è –≤&nbsp;–æ–¥–∏–Ω –∏–∑&nbsp;–±–∞–Ω–∫–æ–≤-—É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º—ã. <a class="link is-forward" href="https://www.hcfe.ru/support-measures/dv-ipoteka/" target="_blank" rel="noopener noreferrer">–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏</a></p>
      `;
    }

    return [resumeTitle, resume];
  }

  // 3) –ü–æ –∫–ª–∏–∫—É –Ω–∞ –æ—Ç–≤–µ—Ç–µ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≤–æ–ø—Ä–æ—Å
  document.querySelectorAll('.quiz__answer:not(.is-last)').forEach((el) => {
    el.addEventListener('click', () => {
      // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ summingUp()
      const results           = summingUp();
      const resultsTitle      = results[0];
      const resultsBody       = results[1];
      const resultsTitleBox   = document.getElementById('results-title');
      const resultsBox        = document.getElementById('results');

      // –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
      resultsTitleBox.innerHTML(resultsTitle);
      resultsBox.innerHTML(resultsBody);

      // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–∞–π–¥—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
      // TODO: –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –Ω–∞ ¬´–≤–∞–Ω–∏–ª–µ¬ª
      setTimeout(() => {
        carousel.carousel('next');
      }, 320);
    });
  });

  document.querySelectorAll('.quiz__answer:not(.is-last)').forEach((el) => {
    el.addEventListener('click', () => {
      // TODO: –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –Ω–∞ ¬´–≤–∞–Ω–∏–ª–µ¬ª
      $('input:radio').prop('checked', false);
    });
  });

  /**
   * –ü–£–ë–õ–ò–ö–ê–¶–ò–Ø –í –°–û–¶–°–ï–¢–Ø–•
   * TODO: –¥–æ–¥–µ–ª–∞—Ç—å ‚Äî —Å–º. Backup
   * TODO: —Å–¥–µ–ª–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –∑–∞–º–µ–Ω—É –∑–Ω–∞—á–µ–Ω–∏–π Open Graph
   * https://drib.tech/programming/dynamically-change-facebook-open-graph-meta-data-javascript
   */
})(jQuery);
